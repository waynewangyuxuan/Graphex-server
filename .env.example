# ==============================================================================
# Graphex Server Environment Configuration
# ==============================================================================
# Copy this file to .env.development or .env.production and fill in your values
# NEVER commit .env files to version control

# ==============================================================================
# APPLICATION
# ==============================================================================
NODE_ENV=development
PORT=3000
API_VERSION=v1

# ==============================================================================
# DATABASE (PostgreSQL)
# ==============================================================================
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
# Local Development Example:
DATABASE_URL="postgresql://postgres:password@localhost:5432/graphex_dev?schema=public"

# Production Example (Railway/Render):
# DATABASE_URL="postgresql://user:pass@host.railway.app:5432/railway"

# ==============================================================================
# REDIS (Cache & Job Queue)
# ==============================================================================
# Local Development:
REDIS_URL="redis://localhost:6379"

# Production Example:
# REDIS_URL="redis://:password@host:6379"

# ==============================================================================
# AI SERVICES
# ==============================================================================
# Anthropic Claude API
ANTHROPIC_API_KEY="sk-ant-api03-..."

# OpenAI API (Fallback)
OPENAI_API_KEY="sk-proj-..."

# AI Service Configuration
AI_PRIMARY_MODEL="claude-sonnet-4"
AI_FALLBACK_MODEL="gpt-4-turbo"
AI_MAX_RETRIES=3
AI_TIMEOUT_MS=30000

# ==============================================================================
# FILE STORAGE
# ==============================================================================
# For MVP, use local storage. Later, switch to S3
STORAGE_TYPE="local" # local | s3

# Local Storage
LOCAL_STORAGE_PATH="./uploads"

# AWS S3 Configuration (for production)
# AWS_ACCESS_KEY_ID="your-access-key"
# AWS_SECRET_ACCESS_KEY="your-secret-key"
# AWS_REGION="us-east-1"
# AWS_S3_BUCKET="graphex-documents"

# ==============================================================================
# SECURITY
# ==============================================================================
# JWT Secret (for post-MVP authentication)
# JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
# JWT_EXPIRY="24h"

# CORS Allowed Origins (comma-separated)
CORS_ORIGINS="http://localhost:3000,http://localhost:5173"

# Rate Limiting
RATE_LIMIT_WINDOW_MS=3600000 # 1 hour
RATE_LIMIT_MAX_REQUESTS=1000

# ==============================================================================
# BACKGROUND JOBS (BullMQ)
# ==============================================================================
# Worker Concurrency
WORKER_DOCUMENT_PROCESSING_CONCURRENCY=3
WORKER_GRAPH_GENERATION_CONCURRENCY=2
WORKER_QUIZ_GENERATION_CONCURRENCY=2

# Job Timeouts (milliseconds)
JOB_DOCUMENT_PROCESSING_TIMEOUT=60000 # 1 minute
JOB_GRAPH_GENERATION_TIMEOUT=300000 # 5 minutes
JOB_QUIZ_GENERATION_TIMEOUT=30000 # 30 seconds

# ==============================================================================
# DOCUMENT PROCESSING
# ==============================================================================
# File Upload Limits
MAX_FILE_SIZE_MB=10
ALLOWED_MIME_TYPES="application/pdf,text/plain,text/markdown"

# Web Scraping
WEB_SCRAPING_TIMEOUT_MS=30000
WEB_SCRAPING_USER_AGENT="GraphexBot/1.0 (Educational Purpose)"

# ==============================================================================
# LOGGING & MONITORING
# ==============================================================================
LOG_LEVEL="info" # error | warn | info | debug
LOG_FORMAT="json" # json | simple

# ==============================================================================
# FEATURE FLAGS (Optional for MVP)
# ==============================================================================
ENABLE_NOTES_API=false # Notes optional for MVP
ENABLE_AUTH=false # Authentication post-MVP
ENABLE_METRICS=true
